"use client"
import { ArrowDown, ArrowUp, Info } from "lucide-react"

import { Card } from "@/components/ui/card"
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from "@/components/ui/tooltip"
import { ScrollArea } from "@/components/ui/scroll-area"

export default function WeeklySummaryCard() {
  // Sample events data with more details
  const events = [
    {
      id: 1,
      name: "Golden day",
      details: "Tuesday, May 7",
      status: "done",
      color: "green",
    },
    {
      id: 2,
      name: "Truck delivery",
      details: "Wednesday, May 8, 8:00 AM",
      status: "pending",
      color: "orange",
    },
    {
      id: 3,
      name: "Layout change Quechua",
      details: "Friday, May 10, 6:00 - 12:00, 2 people needed",
      status: "pending",
      color: "orange",
    },
    {
      id: 4,
      name: "Snowstorm",
      details: "Monday, May 6, All day",
      status: "done",
      color: "green",
    },
    {
      id: 5,
      name: "Staff training",
      details: "Thursday, May 9, 2:00 - 4:00 PM",
      status: "pending",
      color: "orange",
    },
    {
      id: 6,
      name: "Inventory check",
      details: "Saturday, May 11, 3 people needed",
      status: "pending",
      color: "orange",
    },
    {
      id: 7,
      name: "Promotion launch",
      details: "Tuesday, May 7, All departments",
      status: "done",
      color: "green",
    },
  ]

  const handleCardClick = () => {
    console.log("Card clicked - navigate to week details")
    // Add navigation logic here
  }

  return (
    <Card
      className="relative w-full max-w-sm cursor-pointer shadow-md transition-shadow hover:shadow-lg"
      onClick={handleCardClick}
      tabIndex={0}
      role="button"
      aria-label="View details for Week 17"
      onKeyDown={(e) => {
        if (e.key === "Enter" || e.key === " ") {
          handleCardClick()
        }
      }}
    >
      {/* Fixed Top bar */}
      <div className="sticky top-0 z-10 flex items-center justify-between bg-card p-6 pb-2">
        <h2 className="text-xl font-bold">Week 17</h2>
        <span className="text-sm text-muted-foreground">May 6 – May 12</span>
      </div>

      {/* Scrollable content */}
      <ScrollArea className="h-[320px]">
        <div className="space-y-4 px-6 py-4">
          {/* Section 1 - Workforce */}
          <div className="space-y-1">
            <h3 className="text-sm font-medium text-muted-foreground">Workforce</h3>
            <div className="grid grid-cols-3 gap-2">
              <div>
                <p className="text-xs text-muted-foreground">Forecasted hours</p>
                <p className="font-bold">336h</p>
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Scheduled hours</p>
                <p className="font-bold">328h</p>
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Delta</p>
                <div className="flex items-center text-orange-500">
                  <ArrowDown className="mr-1 h-3 w-3" />
                  <p className="font-bold">-8h</p>
                </div>
              </div>
            </div>
          </div>

          {/* Section 2 - Revenue */}
          <div className="space-y-1">
            <h3 className="text-sm font-medium text-muted-foreground">Revenue</h3>
            <div className="grid grid-cols-3 gap-2">
              <div>
                <p className="text-xs text-muted-foreground">Forecast</p>
                <p className="font-bold">€108,750</p>
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Realized</p>
                <p className="font-bold">€110,200</p>
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Progression</p>
                <div className="flex items-center text-green-500">
                  <ArrowUp className="mr-1 h-3 w-3" />
                  <p className="font-bold">+1.3%</p>
                </div>
              </div>
            </div>
          </div>

          {/* Section 3 - Affinity Rate */}
          <div className="space-y-1">
            <div className="flex items-center justify-between">
              <h3 className="flex items-center text-sm font-medium text-muted-foreground">
                Affinity Rate
                <TooltipProvider>
                  <Tooltip>
                    <TooltipTrigger asChild>
                      <Info className="ml-1 h-3 w-3 cursor-help text-muted-foreground" />
                    </TooltipTrigger>
                    <TooltipContent>
                      <p className="max-w-xs text-xs">
                        Affinity rate measures how well your scheduled hours align with customer traffic patterns.
                      </p>
                    </TooltipContent>
                  </Tooltip>
                </TooltipProvider>
              </h3>
              <p className="font-bold">€108,750</p>
            </div>
          </div>

          {/* Section 4 - Events */}
          <div className="space-y-1">
            <h3 className="text-sm font-medium text-muted-foreground">Events</h3>
            <div className="space-y-2 pt-1">
              {events.map((event) => (
                <div key={event.id} className="flex items-start border-b border-gray-100 pb-2 last:border-0 last:pb-0">
                  <div
                    className={`mt-1.5 mr-2 h-2.5 w-2.5 flex-shrink-0 rounded-full ${
                      event.status === "done" ? "bg-green-500" : "bg-orange-500"
                    }`}
                    aria-hidden="true"
                  />
                  <div className="flex-1">
                    <p
                      className={`text-sm font-medium ${
                        event.status === "done" ? "text-green-700" : "text-orange-700"
                      }`}
                    >
                      {event.name}
                    </p>
                    <p className="text-xs text-muted-foreground">{event.details}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Add some extra space at the bottom for better scrolling */}
          <div className="h-4"></div>
        </div>
      </ScrollArea>
    </Card>
  )
}
